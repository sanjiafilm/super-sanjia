<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- The above 2 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <script type="text/javascript" src="/bootstrap/docs/movies/movies/js/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="/bootstrap/docs/movies/movies/js/cookie.js"></script>

    <!-- Note there is no responsive meta tag here -->

    <link rel="icon" href="../../favicon.ico">

    <title>电影推荐</title>

    <!-- Bootstrap core CSS -->
    <link href="../../dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="non-responsive.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="../../assets/js/ie-emulation-modes-warning.js"></script>

    <!--<script src="moviePlate.js"></script>-->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

    <script type="text/javascript">
        function show(id) {
            var traget = document.getElementById(id);
            traget.style.display = "";
        }	
    </script>

    <script type="text/javascript">
        function hidden(id) {
            var traget = document.getElementById(id);
            traget.style.display = "none";
        }		
    </script>

    <script type="text/javascript">
        function showDiv() {
            document.getElementById("bg").style.display = "block";
            document.getElementById("show").style.display = "block";
        }
    </script>

    <script type="text/javascript">
        window.onload =
            function () {
                // var _ticket = $.cookie("SJ_TICKET");
                var _ticket = getCookie("SJ_TICKET")
                // var searchkey = $("#searchtext").val();
                // $("#searchtext").keyup();
                if (!_ticket) {
                    return;
                }
                //当dataType类型为jsonp时，jQuery就会自动在请求链接上增加一个callback的参数
                $.ajax({
                    url: "http://user.sj.com/user/query/" + _ticket,
                    dataType: "jsonp",
                    type: "GET",
                    success: function (data) {

                        if (data.status == 200) {
                            var _data = JSON.parse(data.data);//jackson

                            var html = _data.name + "，欢迎来到Sanjia Film！<a href=\"http://www.jt.com/user/logout.html\" class=\"link-logout\">[退出]</a>";
                            $("#loginAndregist").html(html);
                        }
                    },
                    error: function () {
                        alert('index error.');
                    }
                });

            
            var searchkey = $("#searchtext").val();
	      	        $("#searchtext").focus();
	      	        $("#searchtext").on("keyup",function(e){
                        alert("begin search");
	      	            $this = $(this);
	      	            last = e.timeStamp;            
	      	            setTimeout(function(){
	      	            console.log(e.timeStamp);
	      	            var $data_data = $this.val();
	      	                if(last-e.timeStamp===0){
	      	                	 $.ajax({
	 			 					url : "/search/associate/" + searchkey,
	 			 					dataType : "json",
	 			 					type : "get",
	 			 					success : function(data){
	 			 						alert(data);
	 		 						},
	 		 						error : function(){
	 		 						alert('index error.');
	 		 						}
	 		 					}); 
	      	                }
	      	            },1000);
	      	        });

                
            }
    </script>



</head>

<body>
    <!-- 导航栏 -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">

            <!--logo展示-->
            <div class="navbar-header">
                <img class="logoImg" src="logo.png">
            </div>

            <!--城市选择-->
            <div class="cityItem_container" id="citydiv">
                <select class="cityItem">
                    <option><a href="#">绵阳</a></option>
                    <option><a href="#">重庆</a></option>
                    <option><a href="#">遂宁</a></option>
                    <option><a href="#">德阳</a></option>
                    <option><a href="#">泸州</a></option>
                </select>
            </div>

            <!--导航和搜索栏-->
            <div id="navbar">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#">最新上映 </a></li>
                    <li><a href="#">豆瓣高分</a></li>
                </ul>
                <form class="navbar-form navbar-left">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="请输入电影名称">
                    </div>
                    <button type="submit" id="searchtext" class="btn btn-default">搜索</button>
                </form>
            </div>

            <!--收藏夹-->
            <div id="shoucangjia">
                <a href="#"><img id="shoucangjiaImg" src="favrite.png" style="margin-right:20px">收藏夹</a>
            </div>

            <!--登录 注册 -->
            <div id="loginAndregist">
                <a style="padding-right:10px" href="page/login" onclick="showDiv()">登录</a>
                <a style="padding-left:10px" href="page/regist">注册</a>
            </div>

        </div>
    </nav>
    <!-- 导航栏结束 -->

    <!--body部分-->
    <div class="bodycontainer">
        <div class="body-header">
            <h6 class="h6line">最佳购票方案：</h6>
            <hr />
        </div>



    </div>


    <div id="bg"></div>

    <div id="show">
        <p style="padding-left:10px" id="loginLine">登录</p>
        <hr />
        <form action="#" method="post">
            <table>
                <tr>
                    <td>用户名：</td>
                    <td>
                        <input type="text" class="userinput" />
                    </td>
                </tr>
                <tr>
                    <td>密码：</td>
                    <td>
                        <input type="password" class="userpassword"></input>
                    </td>
                </tr>
            </table>
            <div class="btn_div">
                <input type="submit" class="submit" value="登录" />

            </div>
        </form>
    </div>






    <!-- /body部分 -->




    <!-- Bootstrap core JavaScript
		================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>

    <nav aria-label="Page navigation">
        <ul class="pagination">
            <li>
                <a href="#" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            <li><a href="#">1</a></li>
            <li><a href="#">2</a></li>
            <li><a href="#">3</a></li>
            <li><a href="#">4</a></li>
            <li><a href="#">5</a></li>
            <li>
                <a href="#" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>



</body>

</html>
